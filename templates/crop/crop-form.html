{{ block "crop-form" . }}
<dialog id="cropFormDialog" class="rounded-md w-72 sm:w-96">
    <div class="p-2 relative">
        {{ template "close-dialog-btn" "dialog#cropFormDialog" }}
        <h3 class="text-center px-2 font-semibold">
            NOVA SAFRA
        </h3>
        <form class="flex flex-col gap-4" hx-post="/crop" hx-target="#crop-selector" hx-swap="beforeend">
            <div class="flex flex-col-reverse">
                <input type="text" name="name" id="crop-name" class="peer" required {{ if . }} pattern="{{ . }}" {{ end }}>
                <label for="crop-name" class="label-peer">
                    Nome da Safra
                </label>
            </div>
            <div class="flex flex-col-reverse">
                <input type="date" name="startDate" id="start-date" class="peer" required>
                <label for="start-date" class="label-peer">
                    Data de in√≠cio da safra
                </label>
            </div>
            <div class="flex items-center justify-center gap-2 mt-3">
                <button type="button" class="cancel-btn w-1/3" onclick="closeCropForm()">
                    CANCELAR
                </button>
                <button class="add-btn w-1/3">
                    ADICIONAR
                </button>
            </div>
        </form>
    </div>
    <script type="module">
        const dialogEl = document.querySelector("dialog#cropFormDialog")
        if (dialogEl) {
            dialogEl.showModal()
            function closeCropForm() {
                dialogEl.close()
                dialogEl.remove()
                window.closeCropForm = undefined
            }
            dialogEl.addEventListener('close', closeCropForm)
            window.closeCropForm = closeCropForm
        }
    </script>
</dialog>
{{ end }}
